show DATABASES;
create database kodilla_course;
create user 'kodilla_user' identified with MYSQL_NATIVE_PASSWORD by 'kodilla_Pass123';
GRANT ALL PRIVILEGES ON kodilla_course.* to kodilla_user;
show TABLES;

CREATE TABLE USERS
(
    ID SERIAL PRIMARY KEY,
    FIRSTNAME VARCHAR(100),
    LASTNAME VARCHAR(100)

);

CREATE TABLE POSTS
(
    ID SERIAL PRIMARY KEY,
    USER_ID BIGINT UNSIGNED NOT NULL,
    BODY VARCHAR(1024),
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

SELECT * FROM USERS;

INSERT INTO USERS (FIRSTNAME, LASTNAME)
VALUES ('John', 'Smith');

COMMIT;

INSERT INTO POSTS (USER_ID, BODY)
VALUES (1, 'This is my first post on this forum!');

COMMIT;

SELECT * FROM POSTS;

INSERT INTO POSTS (USER_ID, BODY)
VALUES (2, 'This is my first post too!');

INSERT INTO USERS (FIRSTNAME, LASTNAME)
VALUES ('Zachary', 'Lee');

INSERT INTO USERS (FIRSTNAME, LASTNAME)
VALUES ('Stephanie', 'Kovalsky');

INSERT INTO USERS (FIRSTNAME, LASTNAME)
VALUES ('Thomas', 'Landgren');

INSERT INTO USERS (FIRSTNAME, LASTNAME)
VALUES ('John', 'Thomson');

INSERT INTO POSTS (USER_ID, BODY)
VALUES (2, 'This is my first post too!');

INSERT INTO POSTS (USER_ID, BODY)
VALUES (2, 'How are you?');

INSERT INTO POSTS (USER_ID, BODY)
VALUES (1, 'Quite good, thanks bro!');

INSERT INTO POSTS (USER_ID, BODY)
VALUES (4, 'Yo all! Here is Thomas!');

COMMIT;



CREATE TABLE ISSUESLIST(

    ID SERIAL PRIMARY KEY,
    NAME VARCHAR(100)
);

SELECT * FROM ISSUESLIST;

CREATE TABLE ISSUES(

    ID SERIAL PRIMARY KEY,
    ISSUESLIST_ID BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (ISSUESLIST_ID) REFERENCES ISSUESLIST(ID),
    SUMMARY VARCHAR(100),
    DESCRIPTION VARCHAR(1024),
    USERS_ID BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (USERS_ID) REFERENCES USERS(ID)



);
SELECT * FROM ISSUESLIST;

INSERT INTO ISSUESLIST (NAME)
VALUE('ToDo');

INSERT INTO ISSUESLIST (NAME)
VALUE('InProgress');

INSERT INTO ISSUESLIST (NAME)
VALUE('Done');

COMMIT;

INSERT INTO ISSUES (ID, ISSUESLIST_ID, SUMMARY, DESCRIPTION,USERS_ID)
VALUES (6,2,'toDo','ggggggggggggggg',4);

INSERT INTO ISSUES (ID, ISSUESLIST_ID, SUMMARY, DESCRIPTION, USERS_ID)
VALUES (7,4,'toDo','ggggggggggggggg',3);

INSERT INTO ISSUES (ID, ISSUESLIST_ID, SUMMARY, DESCRIPTION,USERS_ID)
VALUES (8,3,'toDo','ggggggggggggggg',2);

INSERT INTO ISSUES (ID, ISSUESLIST_ID, SUMMARY, DESCRIPTION,USERS_ID)
VALUES (9,4,'toDo','ggggggggggggggg',5);
INSERT INTO ISSUES (ID, ISSUESLIST_ID, SUMMARY, DESCRIPTION,USERS_ID)
VALUES (2,3,'toDo','ggggggggggggggg',1);

COMMIT ;

SELECT * FROM ISSUES;

SELECT ID, FIRSTNAME FROM USERS
WHERE (ID>=4 AND ID<=10)
OR ID = 1;

SELECT COUNT(*) FROM USERS;

SELECT MIN(ID), MAX(ID) FROM USERS;

SELECT SUM(ID), AVG(ID) FROM USERS;

SELECT  SUM(ID) AS TOTAL, AVG(ID) AS AVERAGE FROM USERS;

SELECT U.FIRSTNAME, U.LASTNAME, P.BODY
FROM USERS U
JOIN POSTS P on U.ID = P.USER_ID;

SELECT USER_ID, COUNT(*) AS POSTS_NUMBER
FROM POSTS;

SELECT I.SUMMARY
FROM ISSUESLIST
JOIN ISSUES I on ISSUESLIST.ID = I.ISSUESLIST_ID;

SELECT U.FIRSTNAME, U.LASTNAME, U.ID
FROM USERS U
JOIN ISSUES I ON U.ID = I.USERS_ID;

SELECT * FROM POSTS;

INSERT INTO POSTS VALUES (5,2,'New posts add');

UPDATE POSTS
SET BODY = 'New posts add'
WHERE BODY = 'to delete';
COMMIT;

DELETE FROM POSTS
WHERE BODY = 'New posts add';
COMMIT;
